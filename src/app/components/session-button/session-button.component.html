@if (!isLoggedIn()) {
<button class="btn btn-primary" (click)="openLoginDialog()">Iniciar Sesión</button>
} @else {
<app-menu [items]="menuItems" (itemClicked)="onMenuAction($event)">
  <div menuTrigger class="flex items-center gap-2">
    <div class="avatar">
      <div class="w-8 rounded-full">
        <img src="https://img.daisyui.com/images/profile/demo/yellingcat@192.webp" />
      </div>
    </div>
    <span class="font-extrabold text-primary">
      {{ authService.authUser()?.name | titlecase }}
    </span>
  </div>
</app-menu>
}

<!-- Login Form Template -->
<ng-template #loginFormTemplate>
  <div class="flex flex-col gap-4">
    @if (loginError()) {
    <div class="alert alert-error text-sm py-2">
      <i class="bi bi-exclamation-circle"></i>
      <span>Credenciales incorrectas. Intenta de nuevo.</span>
    </div>
    }

    <div class="form-control">
      <label class="label"><span class="label-text text-xs">Email</span></label>
      <input type="email" class="input input-sm input-bordered w-full"
        [(ngModel)]="loginForm.email"
        placeholder="admin@gmail.com" />
    </div>

    <div class="form-control">
      <label class="label"><span class="label-text text-xs">Contraseña</span></label>
      <input type="password" class="input input-sm input-bordered w-full"
        [(ngModel)]="loginForm.password"
        placeholder="••••••••"
        (keydown.enter)="onLoginSubmit()" />
    </div>

    <div class="flex justify-end gap-2 mt-2">
      <button class="btn btn-ghost btn-sm" (click)="onLoginCancel()">Cancelar</button>
      <button class="btn btn-primary btn-sm" (click)="onLoginSubmit()"
        [disabled]="!loginForm.email || !loginForm.password">
        <i class="bi bi-box-arrow-in-right me-1"></i> Iniciar Sesión
      </button>
    </div>
  </div>
</ng-template>
